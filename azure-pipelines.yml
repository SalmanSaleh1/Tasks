trigger:
  - master
 
pool:
  name: MyPool
 
steps:
  - checkout: self
    displayName: 'Checkout Code'
 
  - script: |
      echo "Installing Python 3.9"
      choco install python --version 3.9 -y
    displayName: 'Install Python'
 
  - script: |
      echo "Setting up Virtual Environment"
      python -m venv venv
      call .\venv\Scripts\activate && pip install --upgrade pip==22.0.4
      pip install robotframework
      pip install robotframework-seleniumlibrary
      pip install robotframework-csvlibrary
      pip install pytest pytest-xdist
    displayName: 'Install Robot Framework & Dependencies'
 
  - script: |
      echo "Installing Google Chrome and ChromeDriver"
      choco install googlechrome chromedriver -y
    displayName: 'Install Chrome & ChromeDriver'
 
  - script: |
      echo "Checking test directory and files..."
      dir test
    displayName: 'Debug: List Test Files'
 
  - script: |
      echo "Running tests with parallel execution"
      call .\venv\Scripts\activate && robot --console verbose --argumentfile tests/robot_settings.txt --parallel 4 tests/
    displayName: 'Run All Robot Framework Test Cases (Parallel)'
